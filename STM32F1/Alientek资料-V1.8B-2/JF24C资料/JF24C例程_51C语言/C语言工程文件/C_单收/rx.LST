C51 COMPILER V8.08   RX                                                                    12/28/2009 14:08:47 PAGE 1   


C51 COMPILER V8.08, COMPILATION OF MODULE RX
OBJECT MODULE PLACED IN rx.OBJ
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE rx.c ROM(SMALL) BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /****************************************Copyright (c)****************************************************
   2          **
   3          **                                  安阳新世纪电子研究所                                                  
             -    
   4          **
   5          **                                  http://www.ayxsj.com
   6          **
   7          **--------------File Info---------------------------------------------------------------------------------
   8          ** File name:                   rx.c
   9          ** Last modified Date:  2009-09-16
  10          ** Last Version:                V1.0
  11          ** Descriptions:                
  12          *********************************************************************************************************/
  13          
  14          #include<reg51.h>
  15          #include<jf24c.h>
  16          
  17          void delay_1ms(unsigned char n)
  18          {
  19   1        unsigned char i,m;
  20   1        for(i=0;i<n;i++)
  21   1              {
  22   2                      for(m=0;m<220;m++);
  23   2                      for(m=0;m<220;m++);
  24   2               }
  25   1      }
  26          
  27          main()
  28          {
  29   1              SP = 0x60;
  30   1              P1 = 0xFF;
  31   1              KEY_TX=1;
  32   1              P3 = 0xFF;
  33   1      
  34   1              delay_1ms(20);
  35   1              rf_rst();       //JF24C初始化子函数
  36   1      //*************************************
  37   1      //**  初始化成功,LED_RX灯亮20ms
  38   1      //*************************************
  39   1                                      LED_RX=0;
  40   1                                      delay_1ms(20);
  41   1                                      LED_RX=1;
  42   1                                      delay_1ms(20);
  43   1      //***********************************
  44   1      
  45   1      
  46   1      
  47   1              while(1)
  48   1              {       
  49   2              unsigned char mm[N],i;
  50   2              unsigned char code tt[50]= {"0372-5968708/安阳新世纪电子研究所-2009/9/16"};  //将要接收的数据,校验用
  51   2      
  52   2              rx_data(mm);       //接收子函数,存放在数组mm中
  53   2      
  54   2      //**************************************************
C51 COMPILER V8.08   RX                                                                    12/28/2009 14:08:47 PAGE 2   

  55   2      //** 收到数据,测试灯 LED_TX 亮20ms
  56   2      //**************************************************
  57   2                              delay_1ms(50);
  58   2                              LED_TX=0;
  59   2                              delay_1ms(50);
  60   2                              LED_TX=1;
  61   2      //**************************************************
  62   2      
  63   2              for(i=0;i<N;i++)
  64   2                              {
  65   3                               if(mm[i]!=tt[i])
  66   3                                {     
  67   4                                  i=0;
  68   4                                  break;              
  69   4                                }  
  70   3                              }
  71   2      
  72   2      
  73   2              if(i==N)
  74   2                              {
  75   3      //**************************************************
  76   3      //** 接收和发送数据完全吻合,测试灯亮20ms
  77   3      //**************************************************
  78   3                              LED_RX=0;
  79   3                              delay_1ms(20);
  80   3                              LED_RX=1;
  81   3                              delay_1ms(20);     
  82   3                              }                               
  83   2               }
  84   1      }
  85          /*********************************************************************************************************
  86            END FILE
  87          *********************************************************************************************************/


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    112    ----
   CONSTANT SIZE    =     50    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      51
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
